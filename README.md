# Project Zenith - JEPX統合分析システム (Version 9)

JEPX（日本卸電力取引所）のスポット市場価格を自動取得し、多角的な分析を提供するフルスタック・ダッシュボードです。

## 🌟 バージョン9 の主要機能
Version 9 では、運用の安定性を極限まで高める「通知システム」と、直感的な「任意期間分析」を統合しました。

### 1. 🛡 異常検知・即時通知システム
- **自動監視**: GitHub Actions がデータの取得失敗を検知すると、ワークフローを即座に停止。
- **メール通知**: 取得エラー発生時、管理者のメールアドレスへGitHubから即座に通知が飛び、データの欠損を未然に防ぎます。

### 2. 📊 高度な分析ダッシュボード (app.py)
- **基準日自動追従**: JEPXから翌日分が公開されると、自動的に「基準日」を翌日に更新し、最新の24時間グラフを表示。
- **統計メトリック**: 基準日の「平均価格」「最高価格」「最低価格（発生エリア含む）」をトップに表示。
- **統合型トレンド分析**: 
  - **🔍 指定期間**: 任意で選んだ期間の連続推移（または日次平均）を表示する統合タブ。
  - **📅 定型期間**: 7日間、1ヶ月、3ヶ月、6ヶ月、1年の各トレンドに「期間平均単価」を動的表示。
  - **☀️ 季節比較**: 夏期（7-9月）と冬期（12-2月）のエリア別平均価格を比較。
  - **🕒 時間帯分析**: 昼間・夜間・深夜の電力価格特性を期間別に可視化。

### 3. 🌍 厳密な日本時間 (JST) 管理
- サーバー（GitHub/Streamlit）の標準時間に依存せず、すべての計算と表示を `Asia/Tokyo`（JST）で固定。

---

## 📂 ファイル構成と役割 (Version 9)

| ファイル | 役割 | 最新の状態 |
| :--- | :--- | :--- |
| `app.py` | Streamlitダッシュボード本体 | **Ver.9**: 任意期間タブ統合・平均表示版 |
| `fetch_data.py` | データ取得スクリプト | **Ver.9**: 異常終了(exit 1)検知ロジック実装 |
| `daily_update.yml` | GitHub Actions定義 | **Ver.9**: 通知トリガー連動・12:30自動実行 |
| `requirements.txt` | 依存ライブラリ | **Ver.9**: pytz, plotly等 整合性確保済み |

---

## 🛠 セットアップと運用

### ローカル開発

```bash
pip install -r requirements.txt
streamlit run app.py


自動更新スケジュール
実行時間: 毎日 日本時間 12:30（UTC 3:30）

動作: fetch_data.py 実行 → data/spot_2025.csv 更新 → Git Commit & Push
